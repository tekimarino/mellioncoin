{% extends "base.html" %}
{% block content %}
<h4 class="mb-3">Résultats de la simulation</h4>

<div class="row">
  <div class="col-md-6">
    <div class="card mb-3 shadow-sm">
      <div class="card-body">
        <h5 class="card-title">Synthèse</h5>
        <ul class="list-unstyled mb-0">
          <li><strong>Date du calcul :</strong> {{ result.date_calcul }}</li>
          <li><strong>Montant initial X :</strong> {{ "{:,.2f}".format(result.X) }} USD</li>
          <li><strong>Cycle :</strong> {{ result.cycle }} jours</li>
          <li><strong>Taux d'intérêt :</strong> {{ (result.taux_cycle * 100)|round(2) }} %</li>
          <li><strong>Réinvestissement :</strong>
            {% if result.reinvest %}Oui{% else %}Non{% endif %}
          </li>
          <li><strong>Nombre total de MEC :</strong> {{ result.total_MEC_global|round(0) }}</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card mb-3 shadow-sm">
      <div class="card-body">
        <h5 class="card-title">Finances</h5>
        <ul class="list-unstyled mb-0">
          <li><strong>Total intérêts :</strong> {{ "{:,.2f}".format(result.total_I) }}</li>
          <li><strong>Total commissions :</strong> {{ "{:,.2f}".format(result.total_C) }}</li>
          <li><strong>Commission supplémentaire :</strong> {{ "{:,.2f}".format(result.Com_supp) }}</li>
          <li><strong>Revenu global :</strong> {{ "{:,.2f}".format(result.Revenu_global) }}</li>
          <li><strong>Montant investi (avec Sa) :</strong> {{ "{:,.2f}".format(result.montant_investi) }}</li>
          <li><strong>Rendement :</strong> {{ (result.rendement * 100)|round(2) }} %</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<div class="card shadow-sm">
  <div class="card-body">
    <h5 class="card-title mb-3">Détail par niveau</h5>
    <div class="table-responsive">
      <table class="table table-sm table-striped">
        <thead>
        <tr>
          <th>Niveau</th>
          <th>Rôle</th>
          <th>MEC</th>
          <th>Capital</th>
          <th>Intérêt</th>
          <th>Commission</th>
          <th>Revenu</th>
        </tr>
        </thead>
        <tbody>
        {% for n in result.niveaux %}
          <tr>
            <td>{{ n.niveau }}</td>
            <td>{{ n.role }}</td>
            <td>{{ n.mec }}</td>
            <td>{{ "{:,.2f}".format(n.capital) }}</td>
            <td>{{ "{:,.2f}".format(n.interet) }}</td>
            <td>{{ "{:,.2f}".format(n.commission) }}</td>
            <td>{{ "{:,.2f}".format(n.revenu) }}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
    <a href="{{ url_for('index') }}" class="btn btn-outline-primary">
      Nouvelle simulation
    </a>
    <a href="{{ url_for('dashboard') }}" class="btn btn-outline-secondary">
      Voir le tableau de bord
    </a>
  </div>
</div>
{% endblock %}
